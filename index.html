<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Acme Shop ‚Äî HTML/CSS/JS Demo</title>
  <meta name="description" content="A fully functioning single-file website built with HTML, CSS, and JavaScript. Includes shop with cart, gallery, FAQ, and contact." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f172a;          /* slate-900 */
      --bg-soft: #111827;     /* gray-900 */
      --panel: #111827;
      --text: #e5e7eb;        /* gray-200 */
      --muted: #94a3b8;       /* slate-400 */
      --brand: #22c55e;       /* green-500 */
      --brand-600: #16a34a;   /* green-600 */
      --accent: #60a5fa;      /* blue-400 */
      --danger: #ef4444;      /* red-500 */
      --shadow: 0 10px 30px rgba(2, 6, 23, .45);
      --radius: 16px;
    }
    
    /* Light theme */
    .light {
      --bg: #ffffff;
      --bg-soft: #f8fafc;    /* slate-50 */
      --panel: #ffffff;
      --text: #0f172a;
      --muted: #475569;
      --brand: #16a34a;
      --brand-600: #15803d;
      --accent: #2563eb;
      --danger: #dc2626;
      --shadow: 0 10px 30px rgba(2, 6, 23, .08);
    }

    /* Base */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% -10%, rgba(34,197,94,.15), transparent 60%),
                  radial-gradient(1000px 600px at 120% 0%, rgba(96,165,250,.12), transparent 50%),
                  var(--bg);
      background-attachment: fixed;
      line-height: 1.6;
    }
    a { color: inherit; text-decoration: none; }
    img { max-width: 100%; display: block; }
    button { cursor: pointer; }

    .container { width: min(1200px, 92%); margin: 0 auto; }
    .shadow { box-shadow: var(--shadow); }
    .card { background: var(--panel); border: 1px solid rgba(148,163,184,.15); border-radius: var(--radius); }

    /* Header */
    header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: saturate(180%) blur(10px);
      background: color-mix(in oklab, var(--bg) 80%, transparent);
      border-bottom: 1px solid rgba(148,163,184,.15);
    }
    .nav {
      display: flex; align-items: center; justify-content: space-between; gap: 16px;
      padding: 14px 0;
    }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 800; letter-spacing: .2px; }
    .brand .logo { width: 36px; height: 36px; border-radius: 12px; background: linear-gradient(135deg, var(--brand), var(--accent)); display: grid; place-items: center; color: white; font-weight: 800; }

    .navlinks { display: flex; gap: 18px; align-items: center; }
    .navlinks a { padding: 8px 12px; border-radius: 999px; color: var(--muted); font-weight: 600; }
    .navlinks a.active, .navlinks a:hover { color: var(--text); background: rgba(148,163,184,.12); }

    .actions { display: flex; gap: 10px; align-items: center; }
    .btn { padding: 10px 14px; border-radius: 12px; border: 1px solid rgba(148,163,184,.2); background: var(--panel); color: var(--text); font-weight: 600; }
    .btn-primary { background: linear-gradient(135deg, var(--brand), var(--brand-600)); color: white; border: none; }
    .iconbtn { width: 40px; height: 40px; border-radius: 12px; display: grid; place-items: center; border: 1px solid rgba(148,163,184,.2); background: var(--panel); position: relative; }
    .badge { position: absolute; top: -6px; right: -6px; background: var(--danger); color: white; font-size: 12px; padding: 2px 6px; border-radius: 999px; }

    /* Hero */
    .hero { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 28px; align-items: center; padding: 48px 0 24px; }
    .hero h1 { font-size: clamp(28px, 4vw, 48px); line-height: 1.1; margin: 0 0 12px; }
    .hero p { color: var(--muted); margin: 8px 0 18px; }
    .hero .strip { display: inline-block; padding: 6px 10px; background: rgba(34,197,94,.18); color: #86efac; border: 1px solid rgba(34,197,94,.35); border-radius: 999px; font-weight: 700; letter-spacing: .3px; }

    .searchbar { display: flex; gap: 10px; flex-wrap: wrap; }
    .input { flex: 1; min-width: 220px; display: flex; align-items: center; gap: 10px; background: var(--panel); border: 1px solid rgba(148,163,184,.2); border-radius: 12px; padding: 10px 12px; }
    .input input, .input select { width: 100%; border: 0; outline: none; background: transparent; color: var(--text); font-size: 14px; }

    /* Products */
    .section { padding: 24px 0 56px; }
    .section h2 { font-size: clamp(22px, 3vw, 32px); margin: 0 0 12px; }
    .muted { color: var(--muted); }

    .grid { display: grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 16px; }
    @media (max-width: 1024px) { .hero { grid-template-columns: 1fr; } .grid { grid-template-columns: repeat(2,1fr); } }
    @media (max-width: 560px) { .grid { grid-template-columns: 1fr; } .navlinks { display: none; } }

    .product { overflow: hidden; display: flex; flex-direction: column; }
    .product .thumb { aspect-ratio: 4/3; background: linear-gradient(135deg, rgba(96,165,250,.18), rgba(34,197,94,.18)); border-bottom: 1px solid rgba(148,163,184,.15); display: grid; place-items: center; font-size: 42px; }
    .product .info { padding: 12px; display: grid; gap: 6px; }
    .price { font-weight: 800; }
    .chip { font-size: 12px; padding: 2px 8px; border-radius: 999px; border: 1px solid rgba(148,163,184,.2); color: var(--muted); width: max-content; }

    /* Cart Drawer */
    .drawer { position: fixed; top: 0; right: -420px; width: 380px; max-width: 92vw; height: 100dvh; background: var(--panel); border-left: 1px solid rgba(148,163,184,.15); box-shadow: var(--shadow); transition: right .25s ease; z-index: 60; display: flex; flex-direction: column; }
    .drawer.open { right: 0; }
    .drawer header { position: sticky; top: 0; padding: 16px; border-bottom: 1px solid rgba(148,163,184,.15); background: inherit; }
    .drawer .content { padding: 16px; overflow: auto; display: grid; gap: 12px; }
    .cart-item { display: grid; grid-template-columns: 56px 1fr auto; gap: 10px; align-items: center; }
    .cart-item img { width: 56px; height: 56px; border-radius: 10px; object-fit: cover; }
    .qty { display: inline-flex; align-items: center; gap: 6px; border: 1px solid rgba(148,163,184,.25); border-radius: 999px; padding: 4px; }
    .qty button { width: 26px; height: 26px; border-radius: 50%; border: none; background: rgba(148,163,184,.15); font-weight: 800; }

    .drawer footer { margin-top: auto; padding: 16px; border-top: 1px solid rgba(148,163,184,.15); background: inherit; display: grid; gap: 8px; }

    /* Gallery */
    .gallery { display: grid; grid-template-columns: repeat(6, minmax(0,1fr)); gap: 8px; }
    .gallery img { border-radius: 10px; aspect-ratio: 1 / 1; object-fit: cover; cursor: pointer; }
    @media (max-width: 1024px) { .gallery { grid-template-columns: repeat(3,1fr); } }
    @media (max-width: 560px) { .gallery { grid-template-columns: repeat(2,1fr); } }

    /* Lightbox */
    .lightbox { position: fixed; inset: 0; background: rgba(0,0,0,.75); display: none; align-items: center; justify-content: center; z-index: 70; padding: 20px; }
    .lightbox.open { display: flex; }
    .lightbox img { max-height: 90dvh; border-radius: 14px; box-shadow: 0 20px 60px rgba(0,0,0,.6); }

    /* FAQ */
    .faq { display: grid; gap: 10px; }
    .faq details { background: var(--panel); border-radius: 12px; border: 1px solid rgba(148,163,184,.15); padding: 12px 14px; }
    .faq summary { cursor: pointer; font-weight: 700; }

    /* Contact */
    form.contact { display: grid; gap: 12px; max-width: 720px; }
    .row { display: grid; gap: 12px; grid-template-columns: 1fr 1fr; }
    @media (max-width: 720px) { .row { grid-template-columns: 1fr; } }
    .field { display: grid; gap: 6px; }
    .field input, .field textarea { width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(148,163,184,.2); background: var(--panel); color: var(--text); }

    .notice { font-size: 13px; color: var(--muted); }

    /* Footer */
    footer { padding: 28px 0; border-top: 1px solid rgba(148,163,184,.12); color: var(--muted); }

    /* Utilities */
    .flex { display: flex; }
    .center { display: grid; place-items: center; }
    .space { height: 32px; }
    .hide { display: none !important; }
    .sr-only { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 1px, 1px); border: 0; }

    /* Toast */
    .toast { position: fixed; left: 50%; bottom: 24px; transform: translateX(-50%); background: var(--panel); border: 1px solid rgba(148,163,184,.2); padding: 10px 14px; border-radius: 999px; box-shadow: var(--shadow); display: none; z-index: 80; }
    .toast.show { display: block; }
  </style>
</head>
<body>
  <!-- Header -->
  <header aria-label="Primary">
    <div class="container nav">
      <a class="brand" href="#home" aria-label="Acme Shop Home">
        <div class="logo">A</div>
        <span>Acme Shop</span>
      </a>
      <nav class="navlinks" aria-label="Main Navigation">
        <a href="#home" class="active">Home</a>
        <a href="#shop">Shop</a>
        <a href="#gallery">Gallery</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>
      <div class="actions">
        <button class="iconbtn" id="themeToggle" aria-label="Toggle theme">üåì</button>
        <button class="iconbtn" id="cartBtn" aria-label="Open cart">
          üõí
          <span class="badge" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section id="home" class="container hero">
    <div>
      <span class="strip">New</span>
      <h1>Beautiful, minimal, and fast.<br>Everything you need in one file.</h1>
      <p>Fully functioning website built with just HTML, CSS, and JavaScript ‚Äî responsive layout, product search & filter, cart with localStorage, gallery lightbox, FAQ accordion, and a validated contact form.</p>
      <div class="searchbar">
        <label class="input" aria-label="Search products">
          <span>üîé</span>
          <input type="search" id="search" placeholder="Search products (e.g. mug, lamp, bag)‚Ä¶" />
        </label>
        <label class="input" aria-label="Filter category">
          <span>üß©</span>
          <select id="category">
            <option value="all">All categories</option>
            <option value="home">Home</option>
            <option value="workspace">Workspace</option>
            <option value="outdoor">Outdoor</option>
            <option value="apparel">Apparel</option>
          </select>
        </label>
        <button id="scrollToShop" class="btn btn-primary">Shop Now</button>
      </div>
    </div>
    <div class="card shadow" style="padding:18px;">
      <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop" alt="Minimal desk setup" style="border-radius:12px; aspect-ratio: 16/10; object-fit: cover;">
      <div class="muted" style="padding:8px 2px;">Photo by Kelly Sikkema (Unsplash)</div>
    </div>
  </section>

  <!-- Products -->
  <section id="shop" class="container section">
    <h2>Featured Products</h2>
    <p class="muted">Search, filter, and add to cart. Your cart is saved in your browser.</p>
    <div id="productGrid" class="grid"></div>
  </section>

  <!-- Gallery -->
  <section id="gallery" class="container section">
    <h2>Gallery</h2>
    <p class="muted">Click any image to view it larger.</p>
    <div class="gallery" id="galleryGrid"></div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="container section">
    <h2>Frequently Asked Questions</h2>
    <div class="faq">
      <details>
        <summary>Is this site really just one HTML file?</summary>
        <p>Yes! All HTML, CSS, and JS are embedded here. You can split them later if you like.</p>
      </details>
      <details>
        <summary>How does the cart work without a backend?</summary>
        <p>Items you add are saved to <code>localStorage</code> in your browser. This is great for demos, but for real payments you'll need a backend or a payment provider.</p>
      </details>
      <details>
        <summary>Can I customize the colors and content?</summary>
        <p>Absolutely. Tweak the <code>:root</code> CSS variables or switch to the light theme using the toggle.</p>
      </details>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="container section">
    <h2>Contact Us</h2>
    <p class="muted">This demo validates inputs and shows a success toast. For live email, connect a backend or use a service like Formspree, Basin, or a serverless function.</p>
    <form class="contact card shadow" id="contactForm" novalidate>
      <div class="row">
        <div class="field">
          <label for="name">Name</label>
          <input id="name" name="name" placeholder="Your name" required />
        </div>
        <div class="field">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required />
        </div>
      </div>
      <div class="field">
        <label for="subject">Subject</label>
        <input id="subject" name="subject" placeholder="How can we help?" required />
      </div>
      <div class="field">
        <label for="message">Message</label>
        <textarea id="message" name="message" rows="5" placeholder="Write your message‚Ä¶" required></textarea>
      </div>
      <div class="notice">By submitting, you agree to our friendly privacy policy.</div>
      <div style="display:flex; gap:10px; align-items:center;">
        <button class="btn btn-primary" type="submit">Send message</button>
        <a id="mailtoLink" class="btn" href="#">Or email us directly</a>
      </div>
    </form>
  </section>

  <div class="space"></div>

  <!-- Footer -->
  <footer>
    <div class="container" style="display:flex; gap:16px; justify-content:space-between; align-items:center; flex-wrap:wrap;">
      <div>¬© <span id="year"></span> Acme Shop. All rights reserved.</div>
      <div style="display:flex; gap:8px; align-items:center;">
        <label class="sr-only" for="newsletter">Newsletter</label>
        <input id="newsletter" placeholder="Your email" style="padding:10px 12px; border-radius:10px; border:1px solid rgba(148,163,184,.2); background: var(--panel); color: var(--text);">
        <button class="btn">Subscribe</button>
      </div>
    </div>
  </footer>

  <!-- Cart Drawer -->
  <aside class="drawer" id="cartDrawer" aria-label="Shopping cart drawer" aria-hidden="true">
    <header class="flex" style="gap:10px; align-items:center; justify-content:space-between;">
      <h3 style="margin:0;">Your Cart</h3>
      <button class="iconbtn" id="closeCart" aria-label="Close cart">‚úñÔ∏è</button>
    </header>
    <div class="content" id="cartItems"></div>
    <footer>
      <div style="display:flex; justify-content:space-between; font-weight:800;">
        <span>Total</span>
        <span id="cartTotal">‚Çπ0</span>
      </div>
      <button class="btn btn-primary" id="checkoutBtn">Checkout</button>
      <button class="btn" id="clearCartBtn">Clear Cart</button>
    </footer>
  </aside>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image viewer">
    <img id="lightboxImg" alt="Selected gallery item" />
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite">Done!</div>

  <script>
    // --- Utilities ---
    const qs = (sel, ctx=document) => ctx.querySelector(sel);
    const qsa = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));
    const currency = (n) => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR'}).format(n);
    const save = (k,v) => localStorage.setItem(k, JSON.stringify(v));
    const load = (k, fallback) => { try { return JSON.parse(localStorage.getItem(k)) ?? fallback } catch { return fallback } };

    const toast = (msg, timeout=1800) => {
      const el = qs('#toast');
      el.textContent = msg;
      el.classList.add('show');
      setTimeout(() => el.classList.remove('show'), timeout);
    }

    // --- Theme ---
    const applyTheme = (theme) => {
      document.body.classList.toggle('light', theme === 'light');
    };
    const themeToggle = qs('#themeToggle');
    const storedTheme = load('theme', 'dark');
    applyTheme(storedTheme);
    themeToggle.addEventListener('click', () => {
      const theme = document.body.classList.contains('light') ? 'dark' : 'light';
      applyTheme(theme);
      save('theme', theme);
    });

    // --- Products Data ---
    const PRODUCTS = [
      { id: 'p1', name: 'Ceramic Mug', price: 399, category: 'home', emoji: '‚òï', img: 'https://images.unsplash.com/photo-1517705008128-361805f42e86?q=80&w=800&auto=format&fit=crop' },
      { id: 'p2', name: 'Desk Lamp', price: 1299, category: 'home', emoji: 'üí°', img: 'https://images.unsplash.com/photo-1516245834210-c4c142787335?q=80&w=800&auto=format&fit=crop' },
      { id: 'p3', name: 'Canvas Tote', price: 699, category: 'apparel', emoji: 'üëú', img: 'https://images.unsplash.com/photo-1593032457866-8c02d0646a7b?q=80&w=800&auto=format&fit=crop' },
      { id: 'p4', name: 'Wireless Keyboard', price: 2499, category: 'workspace', emoji: '‚å®Ô∏è', img: 'https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=800&auto=format&fit=crop' },
      { id: 'p5', name: 'Water Bottle', price: 549, category: 'outdoor', emoji: 'üö∞', img: 'https://images.unsplash.com/photo-1602143407151-7111542de6e8?q=80&w=800&auto=format&fit=crop' },
      { id: 'p6', name: 'Notebook Set', price: 299, category: 'workspace', emoji: 'üìì', img: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=800&auto=format&fit=crop' },
      { id: 'p7', name: 'Hoodie', price: 1799, category: 'apparel', emoji: 'üß•', img: 'https://images.unsplash.com/photo-1596755094514-f87e8a4d1fe5?q=80&w=800&auto=format&fit=crop' },
      { id: 'p8', name: 'Camping Chair', price: 2199, category: 'outdoor', emoji: '‚õ∫', img: 'https://images.unsplash.com/photo-1523419409543-447519c8c0f1?q=80&w=800&auto=format&fit=crop' }
    ];

    // --- Render Products ---
    const grid = qs('#productGrid');
    const searchInput = qs('#search');
    const categorySelect = qs('#category');

    const renderProducts = () => {
      const q = searchInput.value.toLowerCase().trim();
      const cat = categorySelect.value;
      const filtered = PRODUCTS.filter(p => (cat === 'all' || p.category === cat) && p.name.toLowerCase().includes(q));
      grid.innerHTML = filtered.map(p => `
        <article class="product card shadow" tabindex="0" aria-label="${p.name}">
          <div class="thumb"><span aria-hidden="true">${p.emoji}</span></div>
          <img src="${p.img}" alt="${p.name}" loading="lazy" style="height:0; width:0; opacity:0;"/>
          <div class="info">
            <div style="display:flex; justify-content:space-between; align-items:center; gap:8px;">
              <strong>${p.name}</strong>
              <span class="chip">${p.category}</span>
            </div>
            <div class="price">${currency(p.price)}</div>
            <button class="btn add" data-id="${p.id}">Add to Cart</button>
          </div>
        </article>
      `).join('');
    };

    searchInput.addEventListener('input', renderProducts);
    categorySelect.addEventListener('change', renderProducts);

    // --- Cart ---
    const cartDrawer = qs('#cartDrawer');
    const cartBtn = qs('#cartBtn');
    const closeCart = qs('#closeCart');
    const cartCount = qs('#cartCount');
    const cartItemsEl = qs('#cartItems');
    const cartTotalEl = qs('#cartTotal');

    let cart = load('cart', {}); // { id: qty }

    const syncCartBadge = () => {
      const count = Object.values(cart).reduce((a,b)=>a+b,0);
      cartCount.textContent = count;
    };

    const openDrawer = () => { cartDrawer.classList.add('open'); cartDrawer.setAttribute('aria-hidden','false'); };
    const closeDrawer = () => { cartDrawer.classList.remove('open'); cartDrawer.setAttribute('aria-hidden','true'); };

    cartBtn.addEventListener('click', openDrawer);
    closeCart.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });

    const renderCart = () => {
      const entries = Object.entries(cart);
      if (!entries.length) {
        cartItemsEl.innerHTML = '<p class="muted">Your cart is empty. Add something you love!</p>';
        cartTotalEl.textContent = currency(0);
        syncCartBadge();
        save('cart', cart);
        return;
      }
      let total = 0;
      cartItemsEl.innerHTML = entries.map(([id, qty]) => {
        const p = PRODUCTS.find(x=>x.id===id);
        const sub = p.price * qty; total += sub;
        return `
        <div class="cart-item">
          <img src="${p.img}" alt="${p.name}">
          <div>
            <div style="display:flex; justify-content:space-between; gap:8px;">
              <strong>${p.name}</strong>
              <button class="iconbtn remove" data-id="${id}" aria-label="Remove ${p.name}">üóëÔ∏è</button>
            </div>
            <div class="muted">${currency(p.price)} each</div>
            <div class="qty" role="group" aria-label="Quantity selector">
              <button class="dec" data-id="${id}">‚àí</button>
              <span aria-live="polite">${qty}</span>
              <button class="inc" data-id="${id}">+</button>
            </div>
          </div>
          <div><strong>${currency(sub)}</strong></div>
        </div>`;
      }).join('');
      cartTotalEl.textContent = currency(total);
      syncCartBadge();
      save('cart', cart);
    };

    document.addEventListener('click', (e) => {
      const addBtn = e.target.closest('.add');
      if (addBtn) {
        const id = addBtn.dataset.id;
        cart[id] = (cart[id] || 0) + 1;
        renderCart();
        toast('Added to cart');
        return;
      }
      const inc = e.target.closest('.inc');
      if (inc) { const id = inc.dataset.id; cart[id]++; renderCart(); return; }
      const dec = e.target.closest('.dec');
      if (dec) { const id = dec.dataset.id; cart[id] = Math.max(0, cart[id]-1); if (cart[id]===0) delete cart[id]; renderCart(); return; }
      const rm = e.target.closest('.remove');
      if (rm) { const id = rm.dataset.id; delete cart[id]; renderCart(); toast('Removed'); return; }
    });

    qs('#checkoutBtn').addEventListener('click', () => {
      if (!Object.keys(cart).length) { toast('Your cart is empty'); return; }
      const summary = Object.entries(cart).map(([id, qty])=>{
        const p = PRODUCTS.find(x=>x.id===id); return `${p.name} √ó ${qty}`;
      }).join(', ');
      alert(`Checkout summary:\n${summary}\n\n(Connect a payment gateway to process real payments.)`);
    });

    qs('#clearCartBtn').addEventListener('click', ()=>{ cart = {}; renderCart(); toast('Cart cleared'); });

    // --- Gallery ---
    const GALLERY = [
      'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1519682337058-a94d519337bc?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1493612276216-ee3925520721?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1482192596544-9eb780fc7f66?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1520974735194-6f56d4d8d170?q=80&w=1000&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=1000&auto=format&fit=crop'
    ];

    const galleryGrid = qs('#galleryGrid');
    const lightbox = qs('#lightbox');
    const lightboxImg = qs('#lightboxImg');

    const renderGallery = () => {
      galleryGrid.innerHTML = GALLERY.map(src => `<img src="${src}" alt="Gallery item" loading="lazy">`).join('');
    };

    galleryGrid.addEventListener('click', (e) => {
      if (e.target.tagName === 'IMG') {
        lightboxImg.src = e.target.src;
        lightbox.classList.add('open');
      }
    });
    lightbox.addEventListener('click', () => lightbox.classList.remove('open'));

    // --- Contact ---
    const contactForm = qs('#contactForm');
    const mailto = qs('#mailtoLink');

    const validate = () => {
      const data = Object.fromEntries(new FormData(contactForm));
      const errors = {};
      if (!data.name || data.name.trim().length < 2) errors.name = 'Please enter your name';
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(data.email || '')) errors.email = 'Enter a valid email';
      if (!data.subject || data.subject.trim().length < 3) errors.subject = 'Enter a subject';
      if (!data.message || data.message.trim().length < 10) errors.message = 'Message should be at least 10 characters';
      return { data, errors };
    };

    contactForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const { data, errors } = validate();
      qsa('.error', contactForm).forEach(el=>el.remove());
      if (Object.keys(errors).length) {
        Object.entries(errors).forEach(([k,v]) => {
          const field = qs('#'+k).closest('.field');
          const err = document.createElement('div');
          err.className = 'error';
          err.style.color = 'var(--danger)';
          err.textContent = v;
          field.appendChild(err);
        });
        toast('Please fix the errors');
        return;
      }
      // Save draft to localStorage for demo purposes
      save('contactDraft', data);
      toast('Message ready to send');
    });

    contactForm.addEventListener('input', () => {
      const { data } = validate();
      mailto.href = `mailto:support@example.com?subject=${encodeURIComponent(data.subject||'Hello')}&body=${encodeURIComponent(`Hi, my name is ${data.name||''} (%20${data.email||''}).%0D%0A%0D%0A${data.message||''}`)}`;
    });

    // --- Navigation helpers ---
    qs('#scrollToShop').addEventListener('click', () => {
      document.getElementById('shop').scrollIntoView({ behavior: 'smooth' });
    });

    // --- Init ---
    document.getElementById('year').textContent = new Date().getFullYear();
    renderProducts();
    renderCart();
    renderGallery();

    // Update active link on scroll
    const sections = ['home','shop','gallery','faq','contact'].map(id=>document.getElementById(id));
    window.addEventListener('scroll', () => {
      const top = window.scrollY + 140;
      sections.forEach(sec => {
        const link = document.querySelector(`.navlinks a[href="#${sec.id}"]`);
        if (!link) return;
        const inView = top >= sec.offsetTop && top < sec.offsetTop + sec.offsetHeight;
        link.classList.toggle('active', !!inView);
      });
    });
  </script>
</body>
</html>
